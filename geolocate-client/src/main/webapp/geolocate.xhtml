<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:pf="http://primefaces.org/ui">

<h:head>
	<link href="https://code.jquery.com/jquery-2.1.4.min.js" />
	<script type="text/javascript"
		src="http://maps.google.com/maps/api/js?sensor=false" />
	<script type="text/javascript" src="./resources/mapView.js" />
</h:head>
<h:body>
	<!--  onload="initialize()">-->

	<pf:fieldset legend="Geolocate" style="margin-bottom:20px">

		<pf:growl id="messages" showDetail="true" />

		<pf:panel id="mapPanel" header="Geolocated Objects"
			style="margin-bottom:20px">
			<pf:gmap id="gmap" type="HYBRID"
				center="#{mapView.lat}, #{mapView.lng}" zoom="#{mapView.zoom}"
				style="width:100%;height:500px" model="#{mapView.modelMap}"
				widgetVar="map">
				<pf:ajax event="stateChange" listener="#{mapView.onStateChange}"
					update="gmap" />
			</pf:gmap>

			<pf:panel id="FindLocationPanel" header="Find a location">
				<h:form>
					<h:panelGrid columns="9" style="margin-bottom:10px" cellpadding="5">
						<pf:outputLabel for="address" value="Address:" />
						<pf:inputText id="address" />
						<pf:commandButton value="Localize" icon="ui-icon-arrow-4-diag"
							onclick="geocode()" type="button" />
						<h:outputText value="  | " />
						<pf:outputLabel for="lat" value="Lat:" />
						<pf:inputText id="lat" />
						<pf:outputLabel for="lng" value="Lng:" />
						<pf:inputText id="lng" />
						<pf:commandButton value="Localize" icon="ui-icon-arrow-4-diag"
							onclick="reverseGeocode()" type="button" />
					</h:panelGrid>
				</h:form>
			</pf:panel>

		</pf:panel>

		<pf:dialog widgetVar="dlg" showEffect="fade">
			<h:form prependId="false">
				<h:panelGrid columns="2">
					<h:outputLabel for="title" value="Title:" />
					<pf:inputText id="title" value="#{mapView.title}" />

					<f:facet name="footer">

					</f:facet>
				</h:panelGrid>

				<h:inputHidden id="lat" value="#{mapView.lat}" />
				<h:inputHidden id="lng" value="#{mapView.lng}" />
			</h:form>
		</pf:dialog>

		<pf:panel id="searchPanel" header="Filter Objects by tags">
		<table>
					<tr>
						<td><h:outputLabel value="Tag"
								for="input-located-object:inputOneTag" /></td>
						<td><pf:inputText id="inputOneTag"
								value="#{inputLocatedObjForm.inputOneTag}" /></td>
						<td><pf:commandButton value="Add" icon="ui-icon-circle-plus">
								<f:ajax execute="inputOneTag" render="inputTags inputOneTag"
									listener="#{inputLocatedObjForm.addTagAction}" />
							</pf:commandButton> <pf:message for="inputTags" /></td>
					
						<td><h:outputText id="puce" styleClass="ui-icon ui-icon-bullet" value=""/></td>
						<td><h:outputLabel value="Tags : "
								for="input-located-object:inputTags"/>
								<h:outputText id="inputTags"
								value="#{inputLocatedObjForm.inputTags}" /></td>
					</tr>
				</table>
				<pf:commandButton value="search" icon="ui-icon-search" />
		</pf:panel>
	</pf:fieldset>
</h:body>
</html>